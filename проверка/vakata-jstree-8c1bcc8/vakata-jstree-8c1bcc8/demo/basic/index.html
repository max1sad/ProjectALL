<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>jstree basic demos</title>
	
	<link rel="stylesheet" href="./../../dist/themes/default/style.min.css" />
</head>
<body>


	<h1 onclick="download1(mas())">Раскрывать самому</h1>
	<div id="data" class="demo"></div>
<button id="CreateButton" onclick="gg()">New</button>
	<h1>Сразу в раскрытом состоянии</h1>
	<div id="frmt" class="demo" ></div>


	<script src="jquery.min.js"></script>
	<script src="./../../dist/jstree.min.js"></script>
	
	<script>


	// Раскрывать самому
	$('#data').jstree({
		'core' : {
			'data' : [
				{ "text" : "Корень", "children" : [
						{ "text" : "Child node 1" },
						{ "text" : "Child node 2" }
				]}
			]
		}
	});
// Функция получет массив и передает в функцию библиотеки
function mas() {
alert("new");
let arr_json ={
		'core' : {
			'data' : [
				{
					"text" : "Корень",
					"state" : { "opened" : true },
					"children" : [
						{
							"text" : "Файл1",
							"state" : { "selected" : true },
							"icon" : "jstree-file"
						},
						{ "text" : "Файл2", "state" : { "disabled" : true } },
						{
							"text" : "GGwp",
							"state" : { "opened" : true },
								"children": [
								{
									"text" : "Файл1", "state" : { "selected" : true },
									"icon" : "jstree-file"
								},
								
								]
						}
					]
					
				}
				
			]
		}
	};
	return arr_json;
};

function mas1() {
alert("Ok");
let arr_json1 ={
		'core' : {
			'data' : [
				{
					"text" : "Корень",
					"state" : { "opened" : true },
					"children" : [
						{
							"text" : "Файл1",
							"state" : { "selected" : true },
							"icon" : "jstree-file"
						},
						{ "text" : "Файл2", "state" : { "disabled" : true } },
						{
							"text" : "GGwp",
							"state" : { "opened" : true },
								"children": [
								{
									"text" : "Файл1", "state" : { "selected" : true },
									"icon" : "jstree-file"
								},
								{ "text" : "Файл2", "state" : { "disabled" : true } }
								]
						}
					]
					
				}
				
			]
		}
	};
	return arr_json1;
};
	// Сразу в раскрытом состоянии
	//$('#frmt').on("changed.jstree", function (e, data) {
			//if(data.selected.length) {
		//		alert('Выбрали элемент: ' + data.instance.get_node(data.selected[0]).text);
			//}
		//})
function download1(arr){
console.log("download");
$('#frmt').jstree(arr);

};

function gg(){
alert("gggggg");
download1(mas1());
}; 

	
	//$('#frmt').jstree(mas1());




	</script>
</body>
</html>
